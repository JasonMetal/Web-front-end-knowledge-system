<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>类型 | 前端知识笔记</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.4b1b2517.css" as="style"><link rel="preload" href="/assets/js/app.735e6fcb.js" as="script"><link rel="preload" href="/assets/js/2.5cb423a9.js" as="script"><link rel="preload" href="/assets/js/29.d6781efc.js" as="script"><link rel="prefetch" href="/assets/js/10.003b1904.js"><link rel="prefetch" href="/assets/js/11.e6c51907.js"><link rel="prefetch" href="/assets/js/12.97f760ec.js"><link rel="prefetch" href="/assets/js/13.16a079d8.js"><link rel="prefetch" href="/assets/js/14.ba729c8e.js"><link rel="prefetch" href="/assets/js/15.98bc4478.js"><link rel="prefetch" href="/assets/js/16.9c982a45.js"><link rel="prefetch" href="/assets/js/17.bbebe80a.js"><link rel="prefetch" href="/assets/js/18.417f5bdf.js"><link rel="prefetch" href="/assets/js/19.c8b21384.js"><link rel="prefetch" href="/assets/js/20.6f51abd7.js"><link rel="prefetch" href="/assets/js/21.bf283b45.js"><link rel="prefetch" href="/assets/js/22.7be7440a.js"><link rel="prefetch" href="/assets/js/23.4742eeb2.js"><link rel="prefetch" href="/assets/js/24.d1d0ae86.js"><link rel="prefetch" href="/assets/js/25.05ddb5ef.js"><link rel="prefetch" href="/assets/js/26.f6b481a9.js"><link rel="prefetch" href="/assets/js/27.484f76eb.js"><link rel="prefetch" href="/assets/js/28.f775b8d4.js"><link rel="prefetch" href="/assets/js/3.3907cef8.js"><link rel="prefetch" href="/assets/js/30.82e04d36.js"><link rel="prefetch" href="/assets/js/31.d1b57a76.js"><link rel="prefetch" href="/assets/js/32.1d6b4690.js"><link rel="prefetch" href="/assets/js/33.8f0ed1db.js"><link rel="prefetch" href="/assets/js/4.9a0a833f.js"><link rel="prefetch" href="/assets/js/5.ce8228c5.js"><link rel="prefetch" href="/assets/js/6.77f60620.js"><link rel="prefetch" href="/assets/js/7.f2ca32c7.js"><link rel="prefetch" href="/assets/js/8.7ba72efb.js"><link rel="prefetch" href="/assets/js/9.3c298ae0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4b1b2517.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端知识笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javaScript/type.html" class="active sidebar-link">类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javaScript/type.html#_1-内置类型" class="sidebar-link">1. 内置类型</a></li><li class="sidebar-sub-header"><a href="/javaScript/type.html#_2-值和类型" class="sidebar-link">2. 值和类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javaScript/type.html#_2-1-undefined-和-undeclared" class="sidebar-link">2.1 undefined 和 undeclared</a></li><li class="sidebar-sub-header"><a href="/javaScript/type.html#_2-2-typeof-undeclared" class="sidebar-link">2.2 typeof undeclared;</a></li></ul></li><li class="sidebar-sub-header"><a href="/javaScript/type.html#_3-小结" class="sidebar-link">3. 小结</a></li></ul></li><li><a href="/javaScript/val.html" class="sidebar-link">值</a></li><li><a href="/javaScript/variable.html" class="sidebar-link">变量</a></li><li><a href="/javaScript/nativeFunction.html" class="sidebar-link">原生函数</a></li><li><a href="/javaScript/grammar.html" class="sidebar-link">语法</a></li><li><a href="/javaScript/asyn.html" class="sidebar-link">异步</a></li><li><a href="/javaScript/environment.html" class="sidebar-link">执行环境</a></li><li><a href="/javaScript/operating-mechanism.html" class="sidebar-link">运行机制</a></li><li><a href="/javaScript/closure.html" class="sidebar-link">闭包</a></li><li><a href="/javaScript/RAM.html" class="sidebar-link">内存问题</a></li><li><a href="/javaScript/object.html" class="sidebar-link">面向对象的程序设计</a></li><li><a href="/javaScript/Cross-domain.html" class="sidebar-link">跨域 与 Coment</a></li><li><a href="/javaScript/Simulation.html" class="sidebar-link">原理模拟实现</a></li><li><a href="/javaScript/advancedSkills.html" class="sidebar-link">高级技巧</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>读书笔记</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="类型"><a href="#类型" class="header-anchor">#</a> 类型</h1> <h2 id="_1-内置类型"><a href="#_1-内置类型" class="header-anchor">#</a> 1. 内置类型</h2> <p>javaScript其中内置类型：</p> <ul><li>空值 （null）</li> <li>未定义（undefined）</li> <li>布尔值（boolean）</li> <li>字符串（string）</li> <li>数字（number）</li> <li>对象（object）</li> <li>符号（symbol, ES6中新增）</li></ul> <p>用typeof运算符来查看值的类型</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">typeof</span> <span class="token keyword">undefined</span> <span class="token operator">===</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
  <span class="token keyword">typeof</span> <span class="token boolean">true</span> <span class="token operator">===</span> <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
  <span class="token keyword">typeof</span> <span class="token number">25</span> <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span> <span class="token comment">// true</span>
  <span class="token keyword">typeof</span> <span class="token string">&quot;25&quot;</span> <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span> <span class="token comment">// true</span>
  <span class="token keyword">typeof</span> <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token number">42</span> <span class="token punctuation">}</span> <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token comment">// true</span>
  <span class="token keyword">typeof</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;symbol&quot;</span> <span class="token comment">// true</span>
</code></pre></div><p>除了null，其他值使用typeof查看是都有与之对应的类型字符串。</p> <p>你可能注意到null类型不在此列。它比较特殊，typeof对它的处理有问题：</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">typeof</span> <span class="token keyword">null</span> <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p>正确的返回结果应该是“null”，但是这个BUG由来已久，在JavaScript中已经存在了
将近20年，也许永远也不会修复，因为这牵扯到太多的web系统，“修复”它会产生更多
的BUG，另许多系统无法正常工作。</p> <p>我们需要使用符合条件来验证null值的类型：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token operator">!</span>a <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> a <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p>“null”是假值，也是唯一一个用typeof检测会返回“object”的基本类型。</p> <p>还有一种情况：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">typeof</span> <span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span> <span class="token comment">// true</span>
</code></pre></div><p>这样看来，function(函数)也是JavaScript的一个内置对象，但是查阅资料就会知道，
它实际上是一个object的一个“子类型”。具体来说，函数是“可调用对象”，它有一个内部
属性[[call]]，该属性使其可被调用。</p> <p>再来看看数组。JavaScript支持数组，那么它是否也是一个特殊类型？</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">typeof</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p>数组也是对象。确切的说，它是object的一个“子类型”。
数组的元素按数字的顺序来进行索引，其length属性是元素的个数。</p> <h2 id="_2-值和类型"><a href="#_2-值和类型" class="header-anchor">#</a> 2. 值和类型</h2> <p>JavaScript中的变量是没有类型的，只有值才有。变量可以随时持有任何类型的值。</p> <p>换个角度来讲，JavaScript做不到“类型强制”，也就是说，语言引擎不要求变量总是持有
与其初始值同类型的值。一个变量可以现在被赋值为字符串类型值，随后又被赋值为数字类型值。</p> <p>42的类型为number，并且无法更改。而“42”的类型为string。数字42可以通过强制类型转换为“42”</p> <p>在对变量进行typeof检测时，返回的不是该变量的类型，而是该变量持有的值的类型，因为JavaScript
中变量没有类型。</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
  <span class="token keyword">typeof</span> a <span class="token comment">// “number”;</span>

  a <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token keyword">typeof</span> a<span class="token punctuation">;</span> <span class="token comment">// “boolean”</span>

</code></pre></div><p>typeof 运算符总是返回一个字符串</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">typeof</span> <span class="token keyword">typeof</span> <span class="token number">42</span> <span class="token comment">// &quot;string&quot;</span>
</code></pre></div><p>typeof 42首先返回字符串&quot;number&quot;，然后typeof &quot;number&quot;返回&quot;string&quot;。</p> <h3 id="_2-1-undefined-和-undeclared"><a href="#_2-1-undefined-和-undeclared" class="header-anchor">#</a> 2.1 undefined 和 undeclared</h3> <p>变量在未持有值的时候为undefined,此时typeof返回的是“undefined”</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token punctuation">;</span>

<span class="token keyword">typeof</span> a<span class="token punctuation">;</span> <span class="token comment">// &quot;undefined&quot;</span>

<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> c<span class="token punctuation">;</span>
b <span class="token operator">=</span> c<span class="token punctuation">;</span>

<span class="token keyword">typeof</span> b<span class="token punctuation">;</span> <span class="token comment">// &quot;undefined&quot;</span>
<span class="token keyword">typeof</span> c <span class="token comment">// &quot;undefined&quot;</span>
</code></pre></div><p>大多数开发者倾向于把undefined当作undeclared（未声明），但在JavaScript中两者完全是两回事。</p> <p>已在作用域中声明但是未赋值的变量，是undefined。没有在作用域中声明的变量是undeclared。</p> <p>例如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token punctuation">;</span>
a <span class="token comment">// undefined</span>
b <span class="token comment">// ReferenceError b is no defined</span>
</code></pre></div><p>上例中的，“b is no defined”容易让人误以为是“b is undefined”。其实“undefined”和“is no defined”
是两码事。此时如果浏览器报错成“b is no found”或者“b is no declared”会更准确。</p> <p>更让人误解的是，typeof 处理undeclared变量的方式。例如</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token punctuation">;</span>
<span class="token keyword">typeof</span> a<span class="token punctuation">;</span> <span class="token comment">// &quot;undefined&quot;</span>
<span class="token keyword">typeof</span> b<span class="token punctuation">;</span> <span class="token comment">// &quot;undefined&quot;</span>
</code></pre></div><p>对于undeclared(或者 no defined)变量，typeof照样会返回“undefined”。请注意虽然b是一个undeclared变量，
但是typeof b 却没有报错。这是因为typeof有一个特殊的安全防范机制。</p> <p>此时typeof 如果能返回undeclared(而非undefined)的话，情况会好很多。</p> <h3 id="_2-2-typeof-undeclared"><a href="#_2-2-typeof-undeclared" class="header-anchor">#</a> 2.2 typeof undeclared;</h3> <p>该安全防范机制在浏览器中运行的代码来说还是很有帮助的，因为多个脚本文件会在共享的全局命名空间中加载变量。</p> <p>举个简单的例子，在程序中使用全局变量DEBUG作为“调试模式”的开关。在输出调式信息到控制台之前，我们会检查
DEBUG变量是否已被声明。顶层的全局变量声明<code>var DEBUG = true</code>只在debug.js文件中才有，而该文件只在开发和
测试的时候才会被加载到浏览器中，在生产环境中不予加载。</p> <p>问题是如何检查程序中的全局变量DEBUG才不会出现ReferenceError错误。这时typeof的安全措施机制就成为我们的好帮手。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 这样会抛出错误</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">DEBUG</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Debugging is starting'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 这样是安全的</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token constant">DEBUG</span> <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Debugging is starting'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这不仅用户定义的变量（如DEBUG）有用，对内建API也有帮助</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> atob <span class="token operator">===</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">atob</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">{</span> 
    <span class="token comment">/* */</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>还有一种不用通过typeof的安全防范机制的方法。就是检查全局变量是否是全局变量的属性，浏览器中的全局对象是window.
所以前面的例子也可以用这样实现：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token constant">DEBUG</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ..</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span>atob<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ..</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果想让别人在他们的程序或模块中复制粘贴你的代码，就需要你用的变量是否已经在宿主程序中定义过：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">doSomethingCool</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> helper <span class="token operator">=</span> 
  <span class="token punctuation">(</span><span class="token keyword">typeof</span> FeatureXYZ <span class="token operator">!</span> <span class="token operator">===</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token operator">?</span>
  <span class="token function-variable function">FeatureXYZ</span> <span class="token operator">:</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* default feature */</span><span class="token punctuation">}</span>

  <span class="token keyword">var</span> val <span class="token operator">=</span> <span class="token function">helper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ..</span>
<span class="token punctuation">}</span>
</code></pre></div><p>其他模块和程序引入 doSomethingCool()时，doSomething会检查FeatureXYZ变量是否已经
在宿主程序中定义过；如果是，就用现成的，否则就自己定义：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">FeatureXYZ</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 包含doSomethingCool(..)</span>
    <span class="token keyword">function</span> <span class="token function">doSomethingCool</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> helper <span class="token operator">=</span> 
      <span class="token punctuation">(</span><span class="token keyword">typeof</span> FeatureXYZ <span class="token operator">!</span> <span class="token operator">===</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token operator">?</span>
      <span class="token function-variable function">FeatureXYZ</span> <span class="token operator">:</span>
      <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* default feature */</span><span class="token punctuation">}</span>

      <span class="token keyword">var</span> val <span class="token operator">=</span> <span class="token function">helper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// ..</span>
    <span class="token punctuation">}</span>
    <span class="token function">doSomethingCool</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>这里，FeatureXYZ并不是一个全局变量，但我们还是可以用typeof的安全防范机制来做检查，因为这里没有
全局对象可用。</p> <p>还有一些人喜欢使用“依赖注入”（dependency injection）设计模式，就是将依赖通过参数显示地传递到函数中，如：</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">function</span> <span class="token function">doSomethingCool</span><span class="token punctuation">(</span><span class="token parameter">FeatureXYZ</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> helper <span class="token operator">=</span> FeatureXYZ <span class="token operator">||</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* default feature */</span><span class="token punctuation">}</span>
    <span class="token keyword">var</span> val <span class="token operator">=</span> <span class="token function">helper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="_3-小结"><a href="#_3-小结" class="header-anchor">#</a> 3. 小结</h2> <p>JavaScript 有七种内置类型：null、undefined、boolean、number、string、object、symbol,可以使用typeof来查看。</p> <p>变量没有类型，但它们持有的值有类型。类型定义了值的行为特征。</p> <p>很多开发者将undefined 和 undeclared混为一谈，但在JavaScript中它们是两码事。undefined是值的一种。undeclared是变量
还未声明。</p> <p>遗憾的是，JavaScript也将它们混为一谈，在我们试图访问“undeclared”变量时这样报错：<code>ReferenceError: a is no defined</code>，
并且 typeof 对 <code>undefined</code>和<code>undeclared</code>变量都返回<code>“undefined”</code>。</p> <p>然而，通过typeof 的安全防范机制（阻止报错）来检查undeclared变量，有时是不错的办法。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/javaScript/val.html">
        值
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.735e6fcb.js" defer></script><script src="/assets/js/2.5cb423a9.js" defer></script><script src="/assets/js/29.d6781efc.js" defer></script>
  </body>
</html>
