# 语法

## 1. 语句和表达式

语句相当于句子，表达式相当于短语，运算符则相当于标点符号和连接词。

JavaScript中表达式可以返回一个结果值。例如：

```js
var a = 3 * 6;
var b = a;
b;
```

这三行代码都是包含表达式的语句。var a = 3 ＊ 6和var b = a称为“声明语句”，因为它们声明了变量（还可以为其赋值）。

a = 3 ＊6和b = a（不带var）叫作“赋值表达式”。

第三行代码中只有一个表达式b，同时它也是一个语句（虽然没有太大意义）。这样的情况通常叫作“表达式语句”（expression statement）。

### 1.1 表达式的副作用

大部分表达式没有副作用。例如：

```js
var a = 2;
var b = a + 3;
```
表达式a + 3本身没有副作用（比如改变a的值）。它的结果值为5，通过b = a + 3赋值给变量b。

#### 最常见的副作用的表达式是函数调用：

```js
function foo() {
    a = a + 1;
}
var a = 1;
foo(); // 结果值：undefined。副作用：a的值被改变。
```
#### 其他表达式也有副作用，比如：
```js
    var a = 42;
    var b = a++;
```
a首先返回变量a的当前值42，然后再将a的值加1：
```js
var a = 42;
var b = a++;

a; //43
b; //42
```
很多开发人员误以为变量b和a的值都是43，这是因为没有完全理解++运算符的副作用何时产生。

递增运算符++和递减运算符--都是一元运算符（参见第4章），它们既可以用在操作数的前面，也可以用在后面：

```js
++a // 43
a // 43
```

#### 再如delete运算符。第2章讲过，delete用来删除对象中的属性和数组中的单元。它通常以单独一个语句的形式出现：

```js
var obj = {
    a: 42
};
obj.a; // 42
delete obj.a // true
obj.a // undefined
```

如果操作成功，delete返回true,否则返回false。其副作用是属性被对象中删除

#### 另一个有趣的例子是=赋值运算符。

例如： 

```js
var a;

a = 42; // 42
a // 42;
```

a = 42中的=运算符看起来没有副作用，实际上它的结果值是42，它的副作用是将42赋值给a。

组合赋值运算符，如+=和-=等也是如此。例如，a = b += 2首先执行b +=2（即b = b + 2），然后结果再被赋值给a。

多个赋值语句串联时，赋值表达式（和语句）的结果值就能派上用场，比如：

```js
var a, b, c;
a = b = c = 42;
```

这里c = 42的结果值为42（副作用是将c赋值42），然后b = 42的结果值为42（副作用是将b赋值42），最后是a = 42（副作用是将a赋值42）。

#### 另一个需要注意的问题是：

```js
function vowels(str) {
    var matches;
    if (str) {
        // 提取所有元音字母
        matches = str.match(/[aeiou]/g);

        if (matches) {
            return matches;
        }
    }
}
vowels("Hello World") // ["e", "o", "o"]
```

上面的代码没问题，很多开发人员也喜欢这样做。其实我们可以利用赋值语句的副作用将两个if语句合二为一


### 1.2 代码块

```js
[] + {}; // [object object]
{} + []; // 0
```

表面上看+ 运算符根据第一个操作数（[]或{}）的不同会产生不同的结果，实则不然。

第一行代码中，{}出现在+运算符表达式中，因此它被当作一个值（空对象）来处理。

第4章讲过[]会被强制类型转换为""，而{}会被强制类型转换为"[objectObject]"。

但在第二行代码中，{}被当作一个独立的空代码块（不执行任何操作）。

代码块结尾不需要分号，所以这里不存在语法上的问题。最后+ []将[]显式强制类型转换（参见第4章）为0。

## 2. 运算符优先级

&&运算符先于||执行

### 2.2 更强的绑定

&&运算符的优先级高于||，而||的优先级又高于？ :。
